{"version":3,"sources":["validation/validationRenderer.js"],"names":[],"mappings":"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","file":"validation/validationRenderer.js","sourceRoot":"/source/","sourcesContent":["export class MaterializeFormValidationRenderer {\r\n\r\n  className = 'md-input-validation';\r\n  classNameFirst = 'md-input-validation-first';\r\n\r\n  render(instruction) {\r\n    for (let { error, elements } of instruction.unrender) {\r\n      for (let element of elements) {\r\n        this.remove(element, error);\r\n      }\r\n    }\r\n    for (let { error, elements } of instruction.render) {\r\n      for (let element of elements) {\r\n        this.add(element, error);\r\n      }\r\n    }\r\n  }\r\n\r\n  add(element, error) {\r\n    switch (element.tagName) {\r\n    case 'MD-INPUT': {\r\n      let label = element.querySelector('label');\r\n      let input = element.querySelector('input') || element.querySelector('textarea');\r\n      if (label) {\r\n        label.removeAttribute('data-error');\r\n      }\r\n      if (input) {\r\n        input.classList.remove('valid');\r\n        input.classList.add('invalid');\r\n        error.target = input;\r\n        if (input.hasAttribute('data-show-errortext')) {\r\n          this.addMessage(element, error);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'SELECT': {\r\n      const selectWrapper = element.closest('.select-wrapper');\r\n      if (!selectWrapper) {\r\n        return;\r\n      }\r\n      let input = selectWrapper.querySelector('input');\r\n      if (input) {\r\n        input.classList.remove('valid');\r\n        input.classList.add('invalid');\r\n        error.target = input;\r\n        if (!(input.hasAttribute('data-show-errortext') &&\r\n            input.getAttribute('data-show-errortext') === 'false')) {\r\n          this.addMessage(selectWrapper, error);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'INPUT' : {\r\n      if (element.hasAttribute('md-datepicker')) {\r\n        element.classList.remove('valid');\r\n        element.classList.add('invalid');\r\n        if (!(element.hasAttribute('data-show-errortext') &&\r\n            element.getAttribute('data-show-errortext') === 'false')) {\r\n          this.addMessage(element.parentNode, error);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    default: break;\r\n    }\r\n  }\r\n\r\n  remove(element, error) {\r\n    switch (element.tagName) {\r\n    case 'MD-INPUT': {\r\n      this.removeMessage(element, error);\r\n\r\n      let input = element.querySelector('input') || element.querySelector('textarea');\r\n      if (input && element.querySelectorAll('.' + this.className).length === 0) {\r\n        input.classList.remove('invalid');\r\n        input.classList.add('valid');\r\n      }\r\n      break;\r\n    }\r\n    case 'SELECT': {\r\n      const selectWrapper = element.closest('.select-wrapper');\r\n      if (!selectWrapper) {\r\n        return;\r\n      }\r\n      this.removeMessage(selectWrapper, error);\r\n\r\n      let input = selectWrapper.querySelector('input');\r\n      if (input && selectWrapper.querySelectorAll('.' + this.className).length === 0) {\r\n        input.classList.remove('invalid');\r\n        input.classList.add('valid');\r\n      }\r\n      break;\r\n    }\r\n    case 'INPUT' : {\r\n      if (element.hasAttribute('md-datepicker')) {\r\n        this.removeMessage(element.parentNode, error);\r\n        if (element && element.parentNode.querySelectorAll('.' + this.className).length === 0) {\r\n          element.classList.remove('invalid');\r\n          element.classList.add('valid');\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    default: break;\r\n    }\r\n  }\r\n\r\n  addMessage(element, error) {\r\n    let message = document.createElement('div');\r\n    message.id = `md-input-validation-${error.id}`;\r\n    message.textContent = error.message;\r\n    message.className = this.className;\r\n    if (element.querySelectorAll('.' + this.className).length === 0) {\r\n      message.className += ' ' + this.classNameFirst;\r\n    }\r\n    message.style.opacity = 0;\r\n    element.appendChild(message, element.nextSibling);\r\n    window.getComputedStyle(message).opacity;\r\n    message.style.opacity = 1;\r\n  }\r\n\r\n  removeMessage(element, error) {\r\n    let message = element.querySelector(`#md-input-validation-${error.id}`);\r\n    if (message) {\r\n      element.removeChild(message);\r\n    }\r\n  }\r\n\r\n}\r\n"]}