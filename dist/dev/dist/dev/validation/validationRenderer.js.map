{"version":3,"sources":["validation/validationRenderer.js"],"names":["MaterializeFormValidationRenderer","className","classNameFirst","render","instruction","unrender","result","elements","element","remove","underlineInput","add","input","validationContainer","tagName","querySelector","selectWrapper","closest","parentElement","querySelectorAll","length","classList","valid","label","removeAttribute","target","hasAttribute","addMessage","getAttribute","parentNode","removeMessage","$","children","hasClass","message","document","createElement","id","textContent","style","opacity","appendChild","nextSibling","window","getComputedStyle","removeChild"],"mappings":"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","file":"../../../validation/validationRenderer.js","sourcesContent":["export class MaterializeFormValidationRenderer {\n\n  className = 'md-input-validation';\n  classNameFirst = 'md-input-validation-first';\n\n  render(instruction) {\n    for (let { result, elements } of instruction.unrender) {\n      for (let element of elements) {\n        this.remove(element, result);\n        this.underlineInput(element, false);\n      }\n    }\n    for (let { result, elements } of instruction.render) {\n      for (let element of elements) {\n        this.add(element, result);\n        this.underlineInput(element, true);\n      }\n    }\n  }\n\n  underlineInput(element, render) {\n    let input;\n \t  let validationContainer;\n    switch (element.tagName) {\n      case 'MD-INPUT': {\n        input = element.querySelector('input') || element.querySelector('textarea');\n        validationContainer = element;\n        break;\n      }\n      case 'SELECT': {\n        const selectWrapper = element.closest('.select-wrapper');\n        if (selectWrapper) {\n          input = selectWrapper.querySelector('input');\n        }\n        validationContainer = selectWrapper;\n        break;\n      }\n      case 'INPUT': {\n        input = element;\n        validationContainer = element.parentElement;\n        break;\n      }\n      default: break;\n    }\n    if (input) {\n      if (render) {\n        if (validationContainer.querySelectorAll('.' + this.className).length === 0) {\n          input.classList.remove('invalid');\n          input.classList.add('valid');\n        }\n        else {\n          input.classList.remove('valid');\n          input.classList.add('invalid');\n        }\n      }\n      else {\n        input.classList.remove('valid');\n        input.classList.remove('invalid');\n      }\n    }\n  }\n\n  add(element, result) {\n    if (result.valid) {\n      return;\n    }\n    switch (element.tagName) {\n    case 'MD-INPUT': {\n      let label = element.querySelector('label');\n      let input = element.querySelector('input') || element.querySelector('textarea');\n      if (label) {\n        label.removeAttribute('data-error');\n      }\n      if (input) {\n        result.target = input;\n        if (input.hasAttribute('data-show-errortext')) {\n          this.addMessage(element, result);\n        }\n      }\n      break;\n    }\n    case 'SELECT': {\n      const selectWrapper = element.closest('.select-wrapper');\n      if (!selectWrapper) {\n        return;\n      }\n      let input = selectWrapper.querySelector('input');\n      if (input) {\n        result.target = input;\n        if (!(input.hasAttribute('data-show-errortext') &&\n            input.getAttribute('data-show-errortext') === 'false')) {\n          this.addMessage(selectWrapper, result);\n        }\n      }\n      break;\n    }\n    case 'INPUT' : {\n      if (element.hasAttribute('md-datepicker')) {\n        if (!(element.hasAttribute('data-show-errortext') &&\n            element.getAttribute('data-show-errortext') === 'false')) {\n          this.addMessage(element.parentNode, result);\n        }\n      }\n      break;\n    }\n    default: break;\n    }\n  }\n\n  remove(element, result) {\n    if (result.valid) {\n      return;\n    }\n    switch (element.tagName) {\n    case 'MD-INPUT': {\n      this.removeMessage(element, result);\n      break;\n    }\n    case 'SELECT': {\n      const selectWrapper = element.closest('.select-wrapper');\n      if (!selectWrapper) {\n        return;\n      }\n\n      if ($(selectWrapper.parentElement).children().hasClass('md-input-validation') ) {\n        this.removeMessage(selectWrapper.parentElement, result);\n      } else {\n        this.removeMessage(selectWrapper, result);\n      }\n      break;\n    }\n    case 'INPUT' : {\n      if (element.hasAttribute('md-datepicker')) {\n        this.removeMessage(element.parentNode, result);\n      }\n      break;\n    }\n    default: break;\n    }\n  }\n\n  addMessage(element, result) {\n    let message = document.createElement('div');\n    message.id = `md-input-validation-${result.id}`;\n    message.textContent = result.message;\n    message.className = this.className;\n    if (element.querySelectorAll('.' + this.className).length === 0) {\n      message.className += ' ' + this.classNameFirst;\n    }\n    message.style.opacity = 0;\n    element.appendChild(message, element.nextSibling);\n    window.getComputedStyle(message).opacity;\n    message.style.opacity = 1;\n  }\n\n  removeMessage(element, result) {\n    let message = element.querySelector(`#md-input-validation-${result.id}`);\n    if (message) {\n      element.removeChild(message);\n    }\n  }\n\n}\n"]}