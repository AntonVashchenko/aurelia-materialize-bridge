{"version":3,"sources":["datepicker/datepicker.js"],"names":[],"mappings":"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","file":"datepicker/datepicker.js","sourceRoot":"/source/","sourcesContent":["import {bindable, customAttribute} from 'aurelia-templating';\nimport {bindingMode} from 'aurelia-binding';\nimport {TaskQueue} from 'aurelia-task-queue';\nimport {inject} from 'aurelia-dependency-injection';\nimport {getLogger} from 'aurelia-logging';\nimport {getBooleanFromAttributeValue} from '../common/attributes';\n\n@inject(Element, TaskQueue)\n@customAttribute('md-datepicker')\nexport class MdDatePicker {\n  @bindable() container;\n  @bindable() translation;\n  @bindable({defaultBindingMode: bindingMode.twoWay}) value;\n  @bindable({defaultBindingMode: bindingMode.oneTime}) selectMonths = true;\n  @bindable({defaultBindingMode: bindingMode.oneTime}) selectYears = 15;\n  @bindable({defaultBindingMode: bindingMode.oneTime}) options = {};\n\n  constructor(element, taskQueue) {\n    this.element = element;\n    this.log = getLogger('md-datepicker');\n    this.taskQueue = taskQueue;\n  }\n\n  bind() {\n    this.selectMonths = getBooleanFromAttributeValue(this.selectMonths);\n    this.selectYears = parseInt(this.selectYears, 10);\n    this.element.classList.add('date-picker');\n\n    let options = {\n      selectMonths: this.selectMonths,\n      selectYears: this.selectYears,\n      onClose: function() {\n        // see https://github.com/Dogfalo/materialize/issues/2067\n        // and: https://github.com/amsul/pickadate.js/issues/160\n        $(document.activeElement).blur();\n        // $(this.element).blur();\n      }\n    };\n    let i18n = {};\n    // let i18n = {\n    //   selectMonths: true, // Creates a dropdown to control month\n    //   selectYears: 15, // Creates a dropdown of 15 years to control year\n    //   monthsFull: [ 'Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember' ],\n    //   monthsShort: [ 'Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez' ],\n    //   weekdaysFull: [ 'Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag' ],\n    //   weekdaysShort: [ 'So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa' ],\n    //   today: 'Heute',\n    //   clear: 'Löschen',\n    //   close: 'Schließen',\n    //   firstDay: 1,\n    //   format: 'dddd, dd. mmmm yyyy',\n    //   formatSubmit: 'yyyy/mm/dd'\n    // };\n    Object.assign(options, i18n);\n\n    if (this.options) {\n      Object.assign(options, this.options);\n      //merge callback methods if there is a hook in the advanced options\n      if (this.options.onClose) {\n        options.onClose = function() {\n          this.options.onClose();\n          $(document.activeElement).blur();\n        };\n      }\n    }\n    if (this.container) {\n      options.container = this.container;\n    }\n    this.picker = $(this.element).pickadate(options).pickadate('picker');\n    this.picker.on({\n      'close': this.onClose.bind(this),\n      'set': this.onSet.bind(this)\n    });\n\n    if (this.value) {\n      this.picker.set('select', this.value);\n    }\n    if (this.options && this.options.editable) {\n      $(this.element).on('keypress', (e)=> {\n        if (e.keyCode === 13) {\n          let rawDate = $(this.element).val();\n          if (rawDate) {\n            rawDate = rawDate.split('/').join('-');\n            let parsedDate = new Date(rawDate);\n            this.picker.set('select', parsedDate);\n          }else {\n            this.onCalendarIconClick();\n          }\n        }\n      });\n\n      this.element.classList.add('left');\n      let calendarIcon = document.createElement('i');\n      calendarIcon.classList.add('right');\n      calendarIcon.classList.add('material-icons');\n      calendarIcon.textContent = 'today';\n      this.element.parentNode.insertBefore(calendarIcon, this.element.nextSibling);\n      $(calendarIcon).on('click', this.onCalendarIconClick.bind(this));\n    } else {\n      $(this.element).on('focusin', () => {\n        $(this.element).pickadate('open');\n      });\n    }\n  }\n\n  detached() {\n    if (this.picker) {\n      this.picker.stop();\n    }\n  }\n\n  onClose() {\n    let selected = this.picker.get('select');\n    this.value = selected ? selected.obj : null;\n  }\n\n  onCalendarIconClick(event) {\n    event.stopPropagation();\n    $(this.element).pickadate('open');\n  }\n\n  onSet(value) {\n    //handle this ourselves since Dogfalo removed this functionality from the original plugin\n    if (this.options && this.options.closeOnSelect) {\n      this.picker.close();\n    }\n    // this.value = new Date(value.select);\n  }\n\n  valueChanged(newValue) {\n    this.log.debug('selectedChanged', this.value);\n    // this.taskQueue.queueTask(() => {\n    this.picker.set('select', this.value);\n    // });\n  }\n\n\n}\n"]}