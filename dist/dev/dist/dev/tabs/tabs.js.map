{"version":3,"sources":["tabs/tabs.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAS;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;wBAII,iBAFZ,gBAAgB,SAAhB,WACA,OAAO,OAAP,EAAgB,SAAhB;AAEC,wBAAY,OAAZ,EAAqB,SAArB,EAAgC;;;AAC9B,eAAK,OAAL,GAAe,OAAf,CAD8B;AAE9B,eAAK,SAAL,GAAiB,SAAjB,CAF8B;AAG9B,eAAK,oBAAL,GAA4B,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAA5B,CAH8B;AAI9B,eAAK,gBAAL,GAAwB,IAAI,gBAAJ,CAAqB,KAAK,OAAL,CAA7C,CAJ8B;AAK9B,eAAK,oBAAL,GAA4B,EAA5B,CAL8B;SAAhC;;yBAQA,+BAAW;;;AACT,eAAK,gBAAL,CAAsB,UAAtB,CAAiC,MAAjC,EADS;;AAGT,cAAI,WAAW,KAAK,OAAL,CAAa,gBAAb,CAA8B,IAA9B,CAAX,CAHK;AAIT,aAAG,OAAH,CAAW,IAAX,CAAgB,QAAhB,EAA0B,iBAAS;AACjC,gBAAI,SAAS,IAAI,gBAAJ,CAAqB,KAArB,CAAT,CAD6B;AAEjC,mBAAO,UAAP,CAAkB,CAAC,KAAD,EAAQ,cAAR,CAAlB,EAFiC;AAGjC,kBAAK,oBAAL,CAA0B,IAA1B,CAA+B,MAA/B,EAHiC;WAAT,CAA1B,CAJS;;AAWT,YAAE,KAAK,OAAL,CAAF,CAAgB,IAAhB,GAXS;AAYT,cAAI,eAAe,KAAK,OAAL,CAAa,gBAAb,CAA8B,MAA9B,CAAf,CAZK;AAaT,aAAG,OAAH,CAAW,IAAX,CAAgB,YAAhB,EAA8B,aAAK;AACjC,cAAE,gBAAF,CAAmB,OAAnB,EAA4B,MAAK,oBAAL,CAA5B,CADiC;WAAL,CAA9B,CAbS;;;yBAmBX,+BAAW;;;AACT,eAAK,gBAAL,CAAsB,aAAtB,CAAoC,MAApC,EADS;;AAKT,eAAK,oBAAL,CAA0B,OAA1B,CAAkC,kBAAU;AAC1C,mBAAO,aAAP,CAAqB,KAArB,EAD0C;WAAV,CAAlC,CALS;AAQT,eAAK,oBAAL,GAA4B,EAA5B,CARS;AAST,cAAI,eAAe,KAAK,OAAL,CAAa,gBAAb,CAA8B,MAA9B,CAAf,CATK;AAUT,aAAG,OAAH,CAAW,IAAX,CAAgB,YAAhB,EAA8B,aAAK;AACjC,cAAE,mBAAF,CAAsB,OAAtB,EAA+B,OAAK,oBAAL,CAA/B,CADiC;WAAL,CAA9B,CAVS;;;yBAeX,qDAAqB,GAAG;AAUtB,cAAI,OAAO,EAAE,MAAF,CAAS,YAAT,CAAsB,MAAtB,CAAP,CAVkB;AAWtB,+BAAqB,KAAK,OAAL,EAAc,UAAnC,EAA+C,IAA/C,EAXsB;;;yBAcxB,+BAAU,IAAI;AACZ,YAAE,KAAK,OAAL,CAAF,CAAgB,IAAhB,CAAqB,YAArB,EAAmC,EAAnC,EADY;AAEZ,eAAK,oBAAL,CAA0B;AACxB,oBAAQ,EAAE,cAAc;6BAAU;eAAV,EAAxB;WADF,EAFY;;;;;8BAQI;AAChB,gBAAI,WAAW,KAAK,OAAL,CAAa,gBAAb,CAA8B,UAA9B,CAAX,CADY;AAEhB,gBAAI,QAAQ,CAAC,CAAD,CAFI;AAGhB,gBAAI,OAAO,IAAP,CAHY;AAIhB,eAAG,OAAH,CAAW,IAAX,CAAgB,QAAhB,EAA0B,UAAC,CAAD,EAAI,CAAJ,EAAU;AAClC,kBAAI,EAAE,SAAF,CAAY,QAAZ,CAAqB,QAArB,CAAJ,EAAoC;AAClC,wBAAQ,CAAR,CADkC;AAElC,uBAAO,EAAE,IAAF,CAF2B;AAGlC,uBAHkC;eAApC;aADwB,CAA1B,CAJgB;AAWhB,mBAAO,EAAE,UAAF,EAAQ,YAAR,EAAP,CAXgB","file":"tabs/tabs.js","sourceRoot":"/source/","sourcesContent":["import { customAttribute } from 'aurelia-templating';\nimport { inject } from 'aurelia-dependency-injection';\nimport { TaskQueue } from 'aurelia-task-queue';\nimport { fireMaterializeEvent } from '../common/events';\nimport { AttributeManager } from '../common/attributeManager';\n\n@customAttribute('md-tabs')\n@inject(Element, TaskQueue)\nexport class MdTabs {\n  constructor(element, taskQueue) {\n    this.element = element;\n    this.taskQueue = taskQueue;\n    this.fireTabSelectedEvent = this.fireTabSelectedEvent.bind(this);\n    this.attributeManager = new AttributeManager(this.element);\n    this.tabAttributeManagers = [];\n  }\n\n  attached() {\n    this.attributeManager.addClasses('tabs');\n\n    let children = this.element.querySelectorAll('li');\n    [].forEach.call(children, child => {\n      let setter = new AttributeManager(child);\n      setter.addClasses(['tab', 'primary-text']);\n      this.tabAttributeManagers.push(setter);\n    });\n\n    // this.taskQueue.queueTask(() => {\n    $(this.element).tabs();\n    let childAnchors = this.element.querySelectorAll('li a');\n    [].forEach.call(childAnchors, a => {\n      a.addEventListener('click', this.fireTabSelectedEvent);\n    });\n    // });\n  }\n\n  detached() {\n    this.attributeManager.removeClasses('tabs');\n\n    // no destroy handler in tabs\n\n    this.tabAttributeManagers.forEach(setter => {\n      setter.removeClasses('tab');\n    });\n    this.tabAttributeManagers = [];\n    let childAnchors = this.element.querySelectorAll('li a');\n    [].forEach.call(childAnchors, a => {\n      a.removeEventListener('click', this.fireTabSelectedEvent);\n    });\n  }\n\n  fireTabSelectedEvent(e) {\n    // fix Materialize tab indicator (see: https://github.com/Dogfalo/materialize/pull/2809)\n    // happens only when the indicator animation is finished\n    // Waves animation duration: 300ms, delay: 90ms\n    // window.setTimeout(() => {\n    //   let indicatorRight = $('.indicator', this.element).css('right');\n    //   if (indicatorRight.indexOf('-') === 0) {\n    //     $('.indicator', this.element).css('right', 0);\n    //   }\n    // }, 310);\n    let href = e.target.getAttribute('href');\n    fireMaterializeEvent(this.element, 'selected', href);\n  }\n\n  selectTab(id) {\n    $(this.element).tabs('select_tab', id);\n    this.fireTabSelectedEvent({\n      target: { getAttribute: () => `#${id}` }\n    });\n  }\n\n  // FIXME: probably bad\n  get selectedTab() {\n    let children = this.element.querySelectorAll('li.tab a');\n    let index = -1;\n    let href = null;\n    [].forEach.call(children, (a, i) => {\n      if (a.classList.contains('active')) {\n        index = i;\n        href = a.href;\n        return;\n      }\n    });\n    return { href, index };\n  }\n}\n"]}